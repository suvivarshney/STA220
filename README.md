# STA220
Repository for the Final Project of the Course: STA220

####################################################################################################
To scrape the data from Bookings.com - 

1. Run the cells from Code/Scrape_Bookings_Data.ipynb
2. Since the google collab RAM crashes due to excessive data, data is scraped in chunks.
3. Before running the cell with function scrape_hotels_list(city_), set the range in the for loop with number of hotels you want to scrape at a time. It is recomended to run only 50 hotels at a time so loop would be like for i in range(0,50,25). This would run loop only 2 times with offset 0 and 25 and load first 50 hotels.
4. By defualt code runs for Los Angeles. Change cities[1] and cities[1][0] in the second last cell to cities[2] and cities[2][0] or cities[3] and city[3][0] if you wish to run for San Diego or Sacramento respectively
5. Change Json files names in the last cells based on the city and the number of run.

####################################################################################################

To Scrap the data from IRDAI Website, use the following codes:

1. Generating PAN Numbers.ipynb
    A. This code generated a PAN.csv file with 10 million randomly generated PAN numbers. 

2. Breaking CAPTCHA Scrapping.ipynb
  A. This file needs the PAN,csv file generated by Generating PAN Numbers.ipynb
  B. This code scraps the data from the IRDAI website by breaking the CAPTCHA
  C. It generates a data file named scrapping_data.csv with all the scrapped data.

3. Analysis IRDAI Data.ipynb
  A. This code needs the file scrapping_data.csv generated by the Breaking CAPTCHA Scrapping.ipynb code.
  B. It analyses the IRDAI Agent data for Average vintage and the average attrition of Isurers.


####################################################################################################
To Analyse the Hotel and the Reviews Data, use the following code:

1. Topic Modelling and Sentiment Analysis.ipynb: 
  A. This code file expects the hotel and reviews data scrapped by Scrape_Bookings_Data.ipynb in .json format. Provide the path to the data in the code. It   also expects the review CSV file with sentiments generated by Sentiment_Analysis.ipynb. Provide the path inside the code. 
  B. This code takes the hotel and the review data cleans it, and finds the most popular topics in the reviews. It also merges the sentiments of the topics   and analyses the top topics with positive ane negative sentiments.

2. Language Detection.ipynb:
  A. This code file expects the hotel and reviews data scrapped by Scrape_Bookings_Data.ipynb in .json format. Provide the path to the data in the code.
  B. This code file analyses the language of the sentiments and can find most popular language used in the reviews.

3. Price Prediction.ipynb 
  A. This code file expects the hotel and reviews data scrapped by Scrape_Bookings_Data.ipynb in .json format. Provide the path to the data in the code. 
  B. This code analyses the features of the hotel data, to apply a multiple linear regression model for price prediction. 
  
4. To perform the sentiment analysis - 
  A. Run the cells from Code/Sentiment_Analysis.ipynb
  B. Run celss 4-9 to load all json files by changing the name of json file in cell 4 and csv file in cell 9.
  C. Merge all csv files into a single file 'scrapping_data_final.csv' and then continue running the cells from cell 10.
  D. You should be able to clean the data, run models and visualize the results from models.

